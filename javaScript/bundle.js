(()=>{var e,t,n,l,i={4213(e,t,n){var l,i;void 0===(i="function"==typeof(l=function(){"use strict";function t(e,t,n){var l=new XMLHttpRequest;l.open("GET",e),l.responseType="blob",l.onload=function(){s(l.response,t,n)},l.onerror=function(){console.error("could not download file")},l.send()}function l(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=o.URL||o.webkitURL,r=document.createElement("a");n=n||e.name||"download",r.download=n,r.rel="noopener","string"==typeof e?(r.href=e,r.origin===location.origin?i(r):l(r.href)?t(e,n,a):i(r,r.target="_blank")):(r.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(r.href)}),4e4),setTimeout((function(){i(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(l(e))t(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,n,l,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,l);var s="application/octet-stream"===e.type,r=/constructor/i.test(o.HTMLElement)||o.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||s&&r||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var u=o.URL||o.webkitURL,h=u.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});o.saveAs=s.saveAs=s,e.exports=s})?l.apply(t,[]):l)||(e.exports=i)}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return i[e].call(n.exports,n,n.exports,a),n.exports}a.m=i,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,l){if(1&l&&(n=this(n)),8&l)return n;if("object"==typeof n&&n){if(4&l&&n.__esModule)return n;if(16&l&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&l&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".bundle.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},l="BAM-CDN:",a.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var s,r;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==l+i){s=u;break}}s||(r=!0,(s=document.createElement("script")).charset="utf-8",a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",l+i),s.src=e),n[e]=[t];var h=(t,l)=>{s.onerror=s.onload=null,clearTimeout(p);var i=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(l))),t)return t(l)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),r&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var l=n.length-1;l>-1&&(!e||!/^http(s?):/.test(e));)e=n[l--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={792:0};a.f.j=(t,n)=>{var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)n.push(l[2]);else{var i=new Promise(((n,i)=>l=e[t]=[n,i]));n.push(l[2]=i);var o=a.p+a.u(t),s=new Error;a.l(o,(n=>{if(a.o(e,t)&&(0!==(l=e[t])&&(e[t]=void 0),l)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,l[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var l,i,[o,s,r]=n,d=0;if(o.some((t=>0!==e[t]))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);r&&r(a)}for(t&&t(n);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkBAM_CDN=self.webpackChunkBAM_CDN||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s={};(()=>{"use strict";a.d(s,{Bg:()=>B,A5:()=>T,x8:()=>I});class e{constructor(e,t){this.lastSortedColumn=null,this.table=e,this.tableId=t,this.init()}init(){this.table.find("tr").each(((e,t)=>{this.handleTableHeaders($(t))}))}handleTableHeaders(t){let n=0;t.find("th").each(((t,l)=>{const i=$(l),o=i.find(".table-header-text"),a=i.find(".table-header-text").text().trim(),s=i.find(".sort").length>0;parseInt(String(i.attr("colspan")),10)>1||""===a||!s?(o.css("cursor","default"),n+=parseInt(String(i.attr("colspan")),10)):(e.makeColumnSortable(i,a,n),n++),i.find(".sort").on("click",(()=>{"default"!==i.css("cursor")&&this.handleSortClick(i,i.data("column-index"))}))}))}handleSortClick(t,n){let l="ascending"===t.data("sort")?"descending":"ascending";const i=this.table.children("tbody").children("tr").get();this.lastSortedColumn!==t&&(l="ascending"),t.data("sort",l),this.lastSortedColumn&&this.lastSortedColumn!==t&&e.hideCarrot($(this.lastSortedColumn),"");const o=e.sortRows(i,n,l);e.hideCarrot(t,l),this.table.children("tbody").append(o),this.lastSortedColumn=t}static sortRows(e,t,n){const l=e.sort(((e,n)=>{var l,i;const o=null!==(l=$(e).children("td").eq(t).text())&&void 0!==l?l:"",a=null!==(i=$(n).children("td").eq(t).text())&&void 0!==i?i:"",s=parseFloat(o),r=parseFloat(a),d=!isNaN(s),c=!isNaN(r);return d&&c?s-r:d?-1:c?1:o.localeCompare(a,void 0,{numeric:!0})}));return"descending"===n&&l.reverse(),l}static hideCarrot(e,t){const n=e.find(".sort i").first(),l=e.find(".sort i").last();"ascending"===t?(n.css("visibility","visible"),l.css("visibility","hidden")):"descending"===t?(n.css("visibility","hidden"),l.css("visibility","visible")):(n.css("visibility","visible"),l.css("visibility","visible"))}static makeColumnSortable(e,t,n){e.find(".header-wrapper").wrapInner(`<span title="Sorteer op ${t}" class="table-header-text"></span>`),e.attr("data-column-index",n.toString())}}class t{constructor(e,t,n,l,i){this.columnIndexes=[],this.text=e,this.colspan=t||1,this.columnIndexes=n,this.id=l,this.fullHeaderName=i}}class n{constructor(e,t=null,n=null,l=!0,i=null){this.validationColor=null,this.validationRGB=null,this.visible=!0,this.link=null,this.text=e,this.validationColor=t,this.validationRGB=n,this.visible=l,this.link=i}}var l=function(e,t,n,l){return new(n||(n=Promise))((function(i,o){function a(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}r((l=l.apply(e,t||[])).next())}))};class i{static createWorkbook(){return l(this,void 0,void 0,(function*(){return new((yield a.e(974).then(a.t.bind(a,4974,23))).Workbook)}))}static createZip(){return l(this,void 0,void 0,(function*(){return new(0,(yield a.e(710).then(a.t.bind(a,1710,23))).default)}))}static createPdfInstance(e){return l(this,void 0,void 0,(function*(){const{jsPDF:t}=yield a.e(781).then(a.bind(a,8781)),{applyPlugin:n}=yield a.e(708).then(a.bind(a,5708));n(t);const l=yield this.loadFont();return t.API&&t.API.events.push(["addFonts",function(){this.addFileToVFS("NotoSans-Regular-normal.ttf",l),this.addFont("NotoSans-Regular-normal.ttf","NotoSans-Regular","normal")}]),new t("landscape","pt",e)}))}static loadFont(){return l(this,void 0,void 0,(function*(){const{font:e}=yield a.e(505).then(a.bind(a,4505));return e}))}static addHeaderRow(e,n,l,i){let o=n;l||(o=[[]],i.forEach((e=>{o[0].push(new t(e.text,1,[e.columnIndex],e.columnIndex,e.text))}))),o.forEach(((t,n)=>{const i=e.addRow(t.map((e=>e.text)));t.forEach(((t,l)=>{t.colspan>1&&e.mergeCells(n+1,l+1,n+1,l+t.colspan)})),l&&i.eachCell((e=>{e.font={bold:!0,color:{argb:"FFFFFFFF"}},e.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF0DB02B"}},e.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},e.alignment={horizontal:"center",vertical:"middle"}}))}))}static addBodyRows(e,t,n,l,i,o){t.forEach(((t,n)=>{l&&t.every((e=>!e.visible))||e.addRow(t.map((e=>{const t=e.text;return isNaN(Number(t))?t:Number(t)}))).eachCell(((e,l)=>{const a=t[l-1];a&&(isNaN(Number(e.value))?e.alignment={wrapText:!0}:e.numFmt="0.00",a.link?(e.value={text:a.text,hyperlink:a.link},e.font={underline:!0,color:{argb:"FF0000FF"}}):e.value=a.text,o&&a.validationColor?e.fill={type:"pattern",pattern:"solid",fgColor:{argb:a.validationColor}}:i&&(e.fill={type:"pattern",pattern:"solid",fgColor:{argb:n%2==0?"E5E5E5":"F2F2F2"}}))}))}))}static autoSizeColumns(e){e&&e.columns&&e.columns.forEach((e=>{let t=0;e.eachCell((e=>{var n;const l=(null===(n=e.value)||void 0===n?void 0:n.toString().length)||0;t=Math.max(t,l)})),e.width=Math.max(t+2,10)}))}static executeDownload(e,t){return l(this,void 0,void 0,(function*(){if(!e||!e.xlsx)return;const n=yield e.xlsx.writeBuffer();if(!URL||!URL.createObjectURL)return;const l=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=URL.createObjectURL(l),a=document.createElement("a");a.href=o,a.download=`${i.parseFileName(t)}.xlsx`,a.click(),URL.revokeObjectURL(o)}))}static calculateMinTableWidth(e,t=200,n=3e3){if(!e)return t;const l=$("<div></div>");l.css({position:"absolute",visibility:"hidden",overflow:"auto",border:"1px solid red"}),l.append(e.clone(!0)),$("body").append(l);let i=t,o=n,a=n;for(;i<=o;){const e=Math.floor((i+o)/2);l.css("width",`${e}px`),l[0].scrollWidth>e?i=e+1:(a=e,o=e-1)}return l.remove(),a}static generatePdfFile(e){return l(this,arguments,void 0,(function*(e,t=null){this.calculateMinTableWidth(e.tableHandler.table)>1e3&&(e.pdfPageSize="a3"),t||(t=yield this.createPdfInstance(e.pdfPageSize)),t.addFileToVFS("NotoSans-Regular-normal.ttf",yield this.loadFont()),t.addFont("NotoSans-Regular-normal.ttf","NotoSans-Regular","normal"),t.setFont("NotoSans-Regular");const n=e.tableHandler.tableHeaders,l=e.tableHandler.tableBody,i=this.getHeadStyle(e),o=this.getBodyStyle(e),a=this.extractHeaderData(n,e),s=this.extractBodyData(l,e);return this.createPdf(t,a,s,i,o,20),t}))}static generatePdf(e){return l(this,arguments,void 0,(function*(e,t=""){const n=yield this.generatePdfFile(e);""===t&&(t=e.tableHandler.tableName),n.save(`${i.parseFileName(t)}.pdf`)}))}static getHeadStyle(e){return e.useStyling?{fillColor:[13,176,43],textColor:[255,255,255],fontStyle:"normal",lineWidth:.5,lineColor:[0,0,0],halign:"center"}:{fillColor:[255,255,255],textColor:[0,0,0],lineWidth:.5,lineColor:[0,0,0]}}static getBodyStyle(e){return e.useStyling?{fillColor:[255,255,255],textColor:[0,0,0],halign:"center"}:{fillColor:[255,255,255],textColor:[0,0,0],lineWidth:.5,lineColor:[0,0,0]}}static extractHeaderData(e,n){const l=[...e];n.useStyling||(l[0]=[],n.tableHandler.fullHeaderNames.forEach((e=>{l[0].push(new t(e.text,1,[e.columnIndex],e.columnIndex,e.text))})));const i=[];return l.forEach((e=>{const t=[];e.forEach((e=>{if(0===e.colspan)return;const n=e.text,l=e.colspan;t.push({content:n,colSpan:l})})),i.push(t)})),i}static extractBodyData(e,t){const n=[];return e.forEach((e=>{const l=[];e.forEach((e=>{if(!e.visible&&t.useFilter)return;const n=e.text,i=t.showValidations?e.validationRGB:null;l.push({content:n,backgroundColor:i})})),l.length>0&&n.push(l)})),n}static createPdf(e,t,n,l,i,o=20){const a=function(e){const t=e.at(-1)||[],n=t.length;if(0===n)return 10;let l=10;n>8&&(l-=.35*(n-8));const i=t.reduce(((e,t)=>e+String(t).length),0)/n;return i>12&&(l-=.5),i>20&&(l-=1),i>30&&(l-=2),Math.max(5,l)}(t),s=a<=7?1:2;e.autoTable({head:t,body:n,startY:o,margin:{left:7,right:7},styles:{font:"NotoSans-Regular",fontSize:a,cellPadding:s,overflow:"linebreak"},headStyles:l,bodyStyles:i,tableWidth:"auto",didParseCell(e){e.cell.raw.backgroundColor&&(e.cell.styles.fillColor=e.cell.raw.backgroundColor)}})}static convertTableToCsv(e,t){const n=[],l=e.fullHeaderNames.map((e=>`"${e.text.replace(/"/gu,'""')}"`));return n.push(l.join(",")),e.tableBody.forEach((e=>{const l=e.map((e=>{if(!e.visible)return null;let n=e.text.replace(/"/gu,'""');return t&&e.validationColor&&(n=`*${n}*`),`"${n}"`})).filter((e=>null!==e));l.length>0&&n.push(l.join(","))})),n.join("\n")}static downloadMultipleCsvFiles(e,t){return l(this,void 0,void 0,(function*(){const n=yield this.createZip();e.forEach(((e,l)=>{const i=t[l]||`table_${l+1}`;n.file(`${i}.csv`,e)})),n.generateAsync({type:"blob"}).then((e=>{const t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="tables.zip",n.click(),URL.revokeObjectURL(t)}))}))}static downloadCsvFile(e,t){const n=new Blob([e],{type:"text/csv"}),l=URL.createObjectURL(n),i=document.createElement("a");i.href=l,i.download=`${t}.csv`,i.click(),URL.revokeObjectURL(l)}static parseFileName(e){return e.replace(/[/?<>\\:*|"]/gu,"_")}}class o{static updateModalCheckboxStates(e,t){t.find("#downloadFilteredView").prop("checked",e.useFilter),t.find("#downloadStyledView").prop("checked",e.useStyling),t.find("#downloadValidationView").prop("checked",e.showValidations)}static updateGlobalCheckboxes(e){B.tables.length<=1?(e.find("hr").hide(),e.find("#pageDownload").parent().parent().hide()):(e.find("hr").show(),e.find("#pageDownload").parent().parent().show())}static updateModalCheckboxes(e,t){e.find("#downloadFilteredView").prop("checked",t.useFilter),e.find("#downloadStyledView").prop("checked",t.useStyling),e.find("#downloadValidationView").prop("checked",t.showValidations)}static getCheckboxStates(e){return{useFilter:e.find("#downloadFilteredView").prop("checked"),useStyling:e.find("#downloadStyledView").prop("checked"),showValidations:e.find("#downloadValidationView").prop("checked")}}static closeModal(){$("#downloadModal").modal("hide")}static updateModalCheckboxStatesGroup(e,t){t.find("#downloadFilteredView").prop("checked",e.useFilter),t.find("#downloadStyledView").prop("checked",e.useStyling),t.find("#downloadValidationView").prop("checked",e.showValidations),t.find("#downloadAsGroup").prop("checked",e.downloadAsGroup),t.find("#downloadOnlyVisible").prop("checked",e.downloadOnlyVisible)}}class r{static addDownloadModalEventListeners(e){const t=e.tableHandler.tableId.replace("table_",""),n=$(`#download-${t}`),l=$("#downloadModal");n.on("click",(()=>{e.tableHandler.table.hasClass("d-none")||($("#downloadModal").modal("show"),o.updateModalCheckboxStates(e,l),o.updateGlobalCheckboxes(l),this.addDownloadButtonsEventListeners(e,l),this.addDownloadOptionsEventListeners(e,l))}))}static addDownloadButtonsEventListeners(e,t){t.find(".download-buttons").off("click").on("click",(t=>{let n=$(t.target);switch(n.hasClass("btn")||(n=n.closest("button")),n.attr("id")){case"download-excel":if(B.enabled)return void B.exportAllTables("excel");e.downloadExcel();break;case"download-pdf":return B.enabled?void B.exportAllTables("pdf"):void e.downloadPdf();case"download-csv":if(B.enabled)return void B.exportAllTables("csv");e.downloadCsv()}}))}static addDownloadOptionsEventListeners(e,t){t.find(".download-options").off("change").on("change",(t=>{const n=$(t.target).attr("id");"downloadFilteredView"===n?e.useFilter=$(t.target).prop("checked"):"downloadStyledView"===n?e.useStyling=$(t.target).prop("checked"):"downloadValidationView"===n?e.showValidations=$(t.target).prop("checked"):"downloadPdfA3"===n&&(e.pdfPageSize=$(t.target).prop("checked")?"a3":"a4")})),t.find(".page-download-options").off("change").on("change",(e=>{switch($(e.target).attr("id")){case"pageDownload":{const n=$(e.target).prop("checked"),l=t.find(".page-download-options #downloadSingleFile").parent().parent();n?l.removeClass("d-none"):l.addClass("d-none"),B.enabled=n;break}case"downloadSingleFile":B.oneFile=!$(e.target).prop("checked")}}))}static addGroupDownloadModalEventListeners(e,t=$("#downloadModal")){e.downloadButton.on("click",(()=>{$("#downloadModalLabel").text("Download tabellen groep"),$(".download-options").append('\n    <div class="col-md-4 group-extra-setting">\n        <div class="form-check form-switch" data-bs-toggle="tooltip" data-bs-title="Exporteer alle tabellen in één bestand, elk op een apart tabblad.">\n            <input class="form-check-input" type="checkbox" id="downloadAsGroup" name="group-extra-setting" value="filtered" checked="">\n            <label class="form-check-label" for="downloadAsGroup">Als groep</label>\n        </div>\n    </div>\n    <div class="col-md-4 group-extra-setting">\n        <div class="form-check form-switch" data-bs-toggle="tooltip" data-bs-title="Exporteer alleen de geselecteerde / zichtbare tabel naar een bestand.">\n            <input class="form-check-input" type="checkbox" id="downloadOnlyVisible" name="group-extra-setting" value="filtered">\n            <label class="form-check-label" for="downloadOnlyVisible">Geselecteerde</label>\n        </div>\n    </div>\n'),B.enabled&&t.find(".group-extra-setting").addClass("d-none"),[...document.querySelectorAll('.group-extra-setting div[data-bs-toggle="tooltip"]')].map((e=>new bootstrap.Tooltip(e,{trigger:"hover"}))),t.modal("show"),o.updateModalCheckboxStatesGroup(e,t),o.updateGlobalCheckboxes(t),this.addDownloadGroupButtonsEventListeners(e,t),this.addDownloadOptionsEventListeners(e,t),this.addDownloadGroupOptionsEventListeners(e);const n=t.find("#pageDownload");n.on("change",(e=>{$(e.target).prop("checked")?t.find(".group-extra-setting").addClass("d-none"):t.find(".group-extra-setting").removeClass("d-none")})),t.on("hidden.bs.modal",(()=>{$("#downloadModalLabel").text("Download tabel"),$(".group-extra-setting").remove(),n.off("change"),t.off("hidden.bs.modal")}))}))}static addDownloadGroupButtonsEventListeners(e,t){t.find(".download-buttons").off("click").on("click",(t=>{let n=$(t.target);switch(n.hasClass("btn")||(n=n.closest("button")),n.attr("id")){case"download-excel":if(B.enabled)return void B.exportAllTables("excel");e.downloadExcel();break;case"download-pdf":if(B.enabled)return void B.exportAllTables("pdf");e.downloadPdf();break;case"download-csv":if(B.enabled)return void B.exportAllTables("csv");e.downloadCsv()}}))}static addDownloadGroupOptionsEventListeners(e){$(".download-options").on("change",(t=>{const n=$(t.target).attr("id");"downloadAsGroup"===n?e.downloadAsGroup=$(t.target).prop("checked"):"downloadOnlyVisible"===n&&(e.downloadOnlyVisible=$(t.target).prop("checked"))}))}}var d,c=function(e,t,n,l){return new(n||(n=Promise))((function(i,o){function a(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}r((l=l.apply(e,t||[])).next())}))};class u{constructor(e,t=!1){this.useFilter=!0,this.useStyling=!0,this.showValidations=!0,this.pdfPageSize="a4",this.tableGroupHandler=null,this.tableHandler=e,t||r.addDownloadModalEventListeners(this)}prepareDownloadExcel(e){return c(this,arguments,void 0,(function*(e,t=null){this.tableHandler.readTableBody();const n=(t=null!=t?t:yield i.createWorkbook()).getWorksheet(this.tableHandler.tableName),l=t.addWorksheet(this.tableHandler.tableName+(n?` (${this.tableHandler.tableId})`:"")),o=this.tableHandler.tableHeaders;i.addHeaderRow(l,o,this.useStyling,this.tableHandler.fullHeaderNames);const a=this.tableHandler.tableBody;return i.addBodyRows(l,a,o.length,this.useFilter,this.useStyling,this.showValidations),i.autoSizeColumns(l),t}))}downloadExcel(){return c(this,arguments,void 0,(function*(e=null){e&&(this.tableHandler=e);const t=yield this.prepareDownloadExcel(this.tableHandler);yield i.executeDownload(t,this.tableHandler.tableName),o.closeModal()}))}downloadPdf(){return c(this,arguments,void 0,(function*(e=null){e&&(this.tableHandler=e),this.tableHandler.readTableBody(),yield i.generatePdf(this),o.closeModal()}))}downloadCsv(e=null){e&&(this.tableHandler=e),this.tableHandler.readTableBody();const t=i.convertTableToCsv(this.tableHandler,this.useFilter);i.downloadCsvFile(t,this.tableHandler.tableName),o.closeModal()}}class h{constructor(e,t,n,l,i=null,o=null,a=null,s=null){this.index=e,this.column=t,this.filter=n,this.textFilter=l,this.moreThan=i,this.lessThan=o,this.rangeFilter=a,this.equalTo=s}}!function(e){e[e.TEXT=1]="TEXT",e[e.RANGE_FILTER=2]="RANGE_FILTER",e[e.MORE_THAN=3]="MORE_THAN",e[e.LESS_THAN=4]="LESS_THAN",e[e.EQUAL_TO=5]="EQUAL_TO"}(d||(d={}));class p{constructor(e){var t,n;this.isOpen=!1,this.size="sm",this.label="Selecteer...",this.theme="light",this.width="full",this.currentFilter=[],this.root=e,this.size=this.root.getAttribute("data-dd-size")||"sm",this.label=this.root.getAttribute("data-dd-label")||"Selecteer...",this.theme=this.root.getAttribute("data-dd-theme")||"light",this.width=this.root.getAttribute("data-dd-width")||"full";const l=(null===(t=this.root.getAttribute("data-dd-column-names"))||void 0===t?void 0:t.split(","))||[],i=(null===(n=this.root.getAttribute("data-dd-tables"))||void 0===n?void 0:n.split(","))||[];this.tables=i.map((e=>{var t;const n=`table_${e.trim()}`,i=(null===(t=l.map((e=>e.trim())).find((t=>t.startsWith(`${e.trim()}:`))))||void 0===t?void 0:t.split(":")[1])||"";let o=I.find((e=>e.tableId===n));if(!o||!o.tableFilter)for(const e of T){const t=e.tables.find((e=>e.tableId===n));if(t){o=t;break}}return{table:o,columnName:i}})),this.root.style.display="none",this.container=document.createElement("div"),this.container.className="multi-select position-relative d-inline-block",this.container.innerHTML=function(e,t,n="sm",l="light"){const i=function(e){switch(e){case"sm":default:return"31px";case"md":return"38px";case"lg":return"48px"}}(n),o=function(e){switch(e){case"sm":default:return"fs-7";case"md":return"fs-6";case"lg":return"fs-5"}}(n);return`\n    <button type="button" class="ms-button btn btn-${l} border d-flex align-items-center gap-2 w-100 justify-content-between ${o}" style="height: ${i} !important;">\n                <span class="ms-label">${t}</span>\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"\n                    class="bi bi-chevron-down" viewBox="0 0 16 16">\n                    <path fill-rule="evenodd"\n                        d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"/>\n                </svg>\n            </button>\n            <div class="ms-dropdown border rounded bg-white p-1 mt-1 shadow-sm position-absolute" style="display:none; z-index:10;">\n                <div class="input-group input-group-sm mb-2">\n                    <input type="text" class="ms-search form-control" placeholder="Zoeken...">\n                </div>\n                <div class="list-group">\n                    <button type="button" class="ms-select-all list-group-item list-group-item-action align-items-center gap-2 text-primary fw-semibold" style="display: flex;">\n                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">\n                            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>\n                            <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>\n                        </svg>\n                        Selecteer alles\n                    </button>\n                    <button type="button" class="ms-deselect-all list-group-item list-group-item-action align-items-center gap-2 rounded-top-2 text-secondary fw-semibold" style="display: none;">\n                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n                            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>\n                        </svg>\n                        Deselecteer alles\n                    </button>\n                    <div class="border-top-1 mt-1"></div>\n                    ${Array.from(e).map((e=>`\n                        <label class="list-group-item d-flex align-items-center gap-2">\n                            <input class="form-check-input me-2 ms-option" type="checkbox" value="${e.value}" ${e.selected?"checked":""}>\n                            ${e.text}\n                        </label>\n                    `)).join("")}\n                </div>\n            </div>\n    `}(this.root.options,this.label,this.size,this.theme),this.root.parentNode.insertBefore(this.container,this.root.nextSibling),this.button=this.container.querySelector(".ms-button"),this.dropdown=this.container.querySelector(".ms-dropdown"),this.labelElement=this.container.querySelector(".ms-label"),this.options=this.container.querySelectorAll(".ms-option"),this.search=this.container.querySelector(".ms-search"),this.selectAllButton=this.container.querySelector(".ms-select-all"),this.deselectAllButton=this.container.querySelector(".ms-deselect-all"),this.button.addEventListener("click",(()=>this.toggle())),document.addEventListener("click",(e=>this.handleClickOutside(e))),this.options.forEach((e=>e.addEventListener("change",(()=>this.optionChanged())))),this.search.addEventListener("input",(()=>this.filter())),this.selectAllButton.addEventListener("click",(()=>this.selectAll())),this.deselectAllButton.addEventListener("click",(()=>this.deselectAll())),this.updateLabel(),this.applyWidth(),this.syncWidth();const o=new MutationObserver((()=>{this.updateOptions()}));this.root.addEventListener("reset",(()=>{this.reset(),this.updateOptions()})),window.addEventListener("resize",(()=>{this.applyWidth(),this.syncWidth()})),o.observe(this.root,{childList:!0,subtree:!1})}optionChanged(){this.updateLabel(),this.syncWidth(),this.options.forEach((e=>{const t=this.root.querySelector(`option[value="${e.value}"]`);t&&(t.selected=e.checked);const n=new Event("change",{bubbles:!0});this.root.dispatchEvent(n)})),this.tables.length>0&&this.filterTables()}updateOptions(){const e=this.dropdown.querySelector(".list-group"),t=new Set(Array.from(e.querySelectorAll(".ms-option")).map((e=>e.value)));Array.from(this.root.options).forEach((n=>{if(n.value&&!n.disabled&&""!==n.value.trim()&&!t.has(n.value.toString())&&!n.disabled){const t=document.createElement("label");t.className="list-group-item d-flex align-items-center gap-2",t.innerHTML=`\n                <input class="form-check-input me-2 ms-option" type="checkbox" value="${n.value}" ${n.selected?"checked":""}>\n                ${n.text}\n            `,t.querySelector(".ms-option").addEventListener("change",(()=>this.optionChanged())),e.appendChild(t)}})),Array.from(e.querySelectorAll(".ms-option")).forEach((e=>{const t=e.value;t&&Array.from(this.root.options).some((e=>e.value===t))||e.parentElement.remove()})),this.options=this.container.querySelectorAll(".ms-option"),this.updateLabel(),this.syncWidth()}toggle(){this.isOpen=!this.isOpen,this.dropdown.style.display=this.isOpen?"block":"none",this.isOpen&&requestAnimationFrame((()=>this.syncWidth()))}close(){this.isOpen=!1,this.dropdown.style.display="none"}handleClickOutside(e){this.container.contains(e.target)||this.close()}filter(){var e,t;const n=this.search.value.toLowerCase(),l=this.dropdown.querySelector(".list-group");let i=!1;const o=n.length>0;Array.from(l.querySelectorAll(".list-group-item")).forEach((e=>{e.classList.contains("ms-no-result")||e.classList.contains("ms-select-all")||e.classList.contains("ms-deselect-all")||(Array.from(e.childNodes).filter((e=>e.nodeType===Node.TEXT_NODE)).map((e=>e.textContent.trim())).join(" ").toLowerCase().includes(n)?(e.classList.add("d-flex"),e.classList.remove("d-none"),i=!0):(e.classList.remove("d-flex"),e.classList.add("d-none")))}));let a=l.querySelector(".ms-no-result");a||(a=document.createElement("div"),a.className="list-group-item text-muted ms-no-result d-none border-top rounded-2",a.textContent="Geen opties gevonden",l.appendChild(a)),a.classList.toggle("d-none",i);const s=null===(e=this.selectAllButton.querySelector("svg"))||void 0===e?void 0:e.nextSibling,r=null===(t=this.deselectAllButton.querySelector("svg"))||void 0===t?void 0:t.nextSibling;s&&(s.textContent=o?"Selecteer huidige resultaten":" Selecteer alles"),r&&(r.textContent=o?" Deselecteer huidige selectie":" Deselecteer alles"),this.updateSelectButtons(i)}updateLabel(){const e=Array.from(this.options).filter((e=>e.checked)).map((e=>e.parentElement.textContent.trim()));this.labelElement.textContent=e.length?e.join(", "):this.label,this.updateSelectButtons()}updateSelectButtons(e=!0){const t=this.dropdown.querySelector(".list-group"),n=Array.from(t.querySelectorAll(".list-group-item")).filter((e=>!(e.classList.contains("d-none")||e.classList.contains("ms-no-result")||e.classList.contains("ms-select-all")||e.classList.contains("ms-deselect-all")))).map((e=>e.querySelector(".ms-option"))).filter((e=>null!==e)),l=n.length>0&&n.every((e=>e.checked));e&&0!==n.length?(this.selectAllButton.style.display=l?"none":"flex",this.deselectAllButton.style.display=l?"flex":"none"):(this.selectAllButton.style.display="none",this.deselectAllButton.style.display="none")}applyWidth(){const e={xs:"120px",sm:"200px",md:"300px",lg:"400px",xl:"500px","2xl":"600px","3xl":"700px",full:"none"}[this.width];"full"===this.width?(this.container.style.width="100%",this.container.style.maxWidth="none"):(this.container.style.width="100%",this.container.style.maxWidth=e)}syncWidth(){this.dropdown.style.minWidth="",this.dropdown.style.maxWidth="",this.dropdown.style.width="";const e=Math.max(this.container.getBoundingClientRect().width,200),t=window.innerWidth,n=this.container.getBoundingClientRect().left+e>t;if(n){const e=t-this.container.getBoundingClientRect().left-10;this.dropdown.style.maxWidth=`${e}px`}this.button.style.width="100%",n||(this.dropdown.style.width=`${e}px`,this.dropdown.style.minWidth="200px")}get value(){return Array.from(this.options).filter((e=>e.checked)).map((e=>e.value))}reset(){this.options.forEach((e=>{e.checked=!1})),this.updateLabel(),this.syncWidth(),this.root.querySelectorAll("option").forEach((e=>{e.selected=!1}));const e=new Event("change",{bubbles:!0});this.root.dispatchEvent(e)}selectAll(){const e=this.dropdown.querySelector(".list-group");Array.from(e.querySelectorAll(".list-group-item")).forEach((e=>{if(!e.classList.contains("d-none")&&!e.classList.contains("ms-no-result")){const t=e.querySelector(".ms-option");t&&(t.checked=!0)}})),this.optionChanged()}deselectAll(){const e=this.dropdown.querySelector(".list-group");Array.from(e.querySelectorAll(".list-group-item")).forEach((e=>{if(!e.classList.contains("d-none")&&!e.classList.contains("ms-no-result")){const t=e.querySelector(".ms-option");t&&(t.checked=!1)}})),this.optionChanged()}filterTables(){this.currentFilter&&this.tables.forEach((e=>{var t;const n=e.table;n.tableFilter.removeFilter(null===(t=this.currentFilter.find((e=>e.tableId===n.tableId)))||void 0===t?void 0:t.activeFilter.index),this.currentFilter=this.currentFilter.filter((e=>e.tableId!==n.tableId))}));const e=this.value;0!==e.length&&this.tables.forEach((t=>{const n=t.table,l=t.columnName;let i;i=n instanceof g?n.fullHeaderNames.find((e=>e.text===l)):n.tableHandler.fullHeaderNames.find((e=>e.text===l));const o=n.tableFilter.applyFilter({columnIndex:i.columnIndex,text:l},d.EQUAL_TO,null,null,null,null,e);this.currentFilter.push({tableId:n.tableId,activeFilter:o})}))}}class f{static openModal(e,t=null){e.filterModal.attr("data-active-table",e.tableId),null!==t&&this.handleClickedColumn(e,t),this.populateExistingFilters(e),this.populateFilterOptions(e,t),b.addAddNewFilterEventHandler(e),b.addChangeFilterTypeEventHandler(e,null),b.addChangeFilterColumnEventHandler(e),b.addCloseModalEventHandler(e),b.addClearFiltersEventHandler(e),b.addOnEnterEventHandler(e),this.showHideNoFiltersMessage(e),this.showHideDeleteFilterButton(e),e.filterModal.modal("show")}static handleClickedColumn(e,t){const n=e.tableHandler.fullHeaderNames.find((e=>e.columnIndex===t));e.filterModal.find(".modal-title").text(`Filter op ${n.text}`);const l=e.filterModal.find("#add-filter-card");this.updateLayoutClickedColumn(l)}static updateLayoutClickedColumn(e){e.find(".row div").first().hide();const t=e.find(".row .col-sm-4").slice(1);e.find(".row .col-sm-2").removeClass("col-sm2").addClass("col-sm-4"),t.removeClass("col-sm-4").addClass("col-sm-8")}static resetClickedColumn(e){e.filterModal.find(".modal-title").text("Filter op kolom"),e.filterModal.find("#add-filter-card .row div").first().show();const t=e.filterModal.find("#add-filter-card .row .col-sm-8");e.filterModal.find("#add-filter-card .row .col-sm-4").slice(1).removeClass("col-sm-4").addClass("col-sm-2"),t.removeClass("col-sm-8").addClass("col-sm-4")}static populateFilterOptions(e,t=null){const n=$("#filter-column");if(n.find("option").not(":first").remove(),0!==e.tableHandler.fullHeaderNames.length)for(let l=0;l<e.tableHandler.fullHeaderNames.length;l++){const i=$("<option></option>");if(i.val(e.tableHandler.fullHeaderNames[l].columnIndex),i.text(e.tableHandler.fullHeaderNames[l].text),t===e.tableHandler.fullHeaderNames[l].columnIndex){i.prop("selected",!0),i.val(t);const n=$("#add-filter-card");this.updateFilterType(n,e,t),this.fillDataList(n,e,t)}n.append(i)}}static populateExistingFilters(e){let t=e.activeFilters;e.filteringOnColumn&&(t=t.filter((t=>t.column.columnIndex===e.filterColumnIndex))),t.forEach((t=>{this.appendFilterHTML(e,t,!0)}))}static appendFilterHTML(e,t,n=!1){var l,i,o,a;this.filterContainer=$("#filter-container");const s=$('\n    <div class="card shadow-sm mb-2" data-bd-index="">\n    <div class="card-body p-2">\n                            <div class="row align-items-center">\n                                <div class="col-6 col-sm-4">\n                                    <h6 class="text-muted p-0 m-0 column-name"></h6>\n                                </div>\n                                <div class="col-6 col-sm-3">\n                                 <div class="firefox-fix">\n                                    <select class="form-select form-select-sm form-select-primary filter-type" aria-label="Default select example">\n                                        <option value="1">Bevat</option>\n                                        <option value="5">gelijk aan</option>\n                                        <option value="2">Getal tussen</option>\n                                        <option value="3">Groter dan</option>\n                                        <option value="4">Kleiner dan</option>\n                                    </select>\n                                    </div>\n                                </div>\n                                \n                                <div class="col-10 col-sm-4 text-field d-none mt-2 mt-sm-0">\n                                    <input type="text" class="form-control form-control-sm text-input" placeholder="Filter waarde" autocomplete="off">\n                                    <datalist class="data-list"></datalist>\n                                </div>\n                                <div class="col-10 col-sm-4 equal-field d-none mt-2 mt-sm-0">\n                                    <select class="form-select form-select-sm equal-input"\n                                            aria-label="Default select example" multiple>\n                                    </select>\n                                </div>\n                                <div class="col-10 col-sm-4 d-none mt-2 mt-sm-0 more-field">\n                                    <input type="number" class="form-control form-control-sm more-input" placeholder="Groter dan">\n                                </div>\n                                <div class="col-10 col-sm-4 d-none mt-2 mt-sm-0 less-field">\n                                    <input type="number" class="form-control form-control-sm less-input" placeholder="Kleiner dan">\n                                </div>\n                                <div class="col-5 col-sm-2 min-field range-input d-none mt-2 mt-sm-0">\n                                    <input type="number" class="form-control form-control-sm min-input" placeholder="Min">\n                                </div>\n                                <div class="col-5 col-sm-2 max-field d-none range-input mt-2 mt-sm-0">\n                                    <input type="number" class="form-control form-control-sm max-input" placeholder="Max">\n                                </div>\n                                <div class="col-2 col-sm-1 d-flex justify-content-end mt-2 mt-sm-0">\n                                    <button class="btn btn-clear text-danger btn-sm d-flex  justify-content-center align-items-center remove-filter" title="Verwijder filter" style="width: 31px; height: 31px; font-size: 31px">\n                                        <i class="bi bi-x"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n</div>'),r=s.find(".column-name");r.text(t.column.text),e.filteringOnColumn&&(r.hide(),this.updateLayoutClickedColumn(s)),s.attr("data-bd-index",t.index),this.setFilterType(t.filter,s),this.setInputValue(s.find(".filter-type"),t.filter),this.setInputValue(s.find(".text-input"),t.textFilter),this.setInputValue(s.find(".min-input"),null===(null===(l=t.rangeFilter)||void 0===l?void 0:l.min)?"":null===(i=t.rangeFilter)||void 0===i?void 0:i.min),this.setInputValue(s.find(".max-input"),null===(null===(o=t.rangeFilter)||void 0===o?void 0:o.max)?"":null===(a=t.rangeFilter)||void 0===a?void 0:a.max),this.setInputValue(s.find(".less-input"),null===t.lessThan?"":t.lessThan),this.setInputValue(s.find(".more-input"),null===t.moreThan?"":t.moreThan),this.fillDataList(s,e,t.column.columnIndex),this.setInputValue(s.find(".equal-input"),t.equalTo),new p(s.find(".equal-input")[0]),b.addCardEventListeners(s,e),this.updateFilterType(s,e,t.column.columnIndex,!1),this.filterContainer.append(s);const d=e.tableHandler.fullHeaderNames.find((e=>e.columnIndex===t.column.columnIndex));this.resetAddFilterModal(d,n),this.showHideNoFiltersMessage(e),this.showHideDeleteFilterButton(e)}static resetErrorState(...e){e.forEach((e=>{e.removeClass("is-invalid"),e.parent().parent().find(".invalid-feedback").hide()}))}static markInvalid(e){e.addClass("is-invalid"),e.parent().parent().find(".invalid-feedback").show()}static setInputValue(e,t){e.is("select")&&Array.isArray(t)?t.forEach((t=>{e.find(`option[value="${t.toLowerCase()}"]`).prop("selected",!0)})):e.val(t)}static setFilterType(e,t){const n={textInput:t.find(".text-field"),rangeInput:t.find(".range-input"),moreThan:t.find(".more-field"),lessThan:t.find(".less-field"),nullField:t.find(".null-field"),equalField:t.find(".equal-field")};switch(Object.values(n).forEach((e=>e.addClass("d-none"))),e){case d.TEXT:n.textInput.removeClass("d-none"),n.textInput.find("input").get(0).focus();break;case d.RANGE_FILTER:n.rangeInput.removeClass("d-none"),n.rangeInput.find("input").get(0).focus();break;case d.MORE_THAN:n.moreThan.removeClass("d-none"),n.moreThan.find("input").get(0).focus();break;case d.LESS_THAN:n.lessThan.removeClass("d-none"),n.lessThan.find("input").get(0).focus();break;case d.EQUAL_TO:n.equalField.removeClass("d-none"),n.equalField.find("select").get(0).focus();break;default:n.nullField.removeClass("d-none")}}static showHideNoFiltersMessage(e){const t=$("#no-filter-card");let n=e.activeFilters;e.filteringOnColumn&&(n=n.filter((t=>t.column.columnIndex===e.filterColumnIndex))),n.length>0?t.addClass("d-none"):t.removeClass("d-none")}static resetAddFilterModal(e,t=!1){const n=$("#add-filter-card"),l=n.find("select.equal-input");if(n.find("input").val(""),n.find(".text-field").addClass("d-none"),n.find(".range-input").addClass("d-none"),l.val([]),l[0].dispatchEvent(new Event("reset")),t)return n.find("select").prop("selectedIndex",0),n.find("select").trigger("change"),void f.setFilterType(0,n);"text"===e.columnType?(n.find(".filter-type").val("5"),this.setFilterType(5,n)):(n.find(".filter-type").prop("selectedIndex",0),f.setFilterType(0,n))}static showTableRowCount(e){const t=e.activeFilters.length,n=e.tableHandler.tableBody.length,l=e.shownRows;let i;if(i=e.hasCustomFilter?$(`.table-group-row-count-${e.customFilterId}`):$(`.table-row-count-${e.tableId}`),0!==t){if(0===l)return i.removeClass("d-none"),void i.text(`Geen resultaten in de ${n} rijen`);i.removeClass("d-none"),i.text(`${l} van de ${n} rijen`)}else i.text(`${n} rijen`)}static showTableFilterCount(e){const t=e.activeFilters.length;let n=$(`.table-filter-count-${e.tableId}`);e.hasCustomFilter&&(n=$(`.table-group-filter-count-${e.customFilterId}`)),0!==t?(n.removeClass("d-none"),n.find("p").text(t.toString())):n.addClass("d-none")}static updateFilterType(e,t,n=0,l=!0){const i=t.tableHandler.fullHeaderNames.find((e=>e.columnIndex===n));if(!i)return;const o=e.find(".filter-type");switch(o.find("option").show(),i.columnType){case"text":o.find('option[value="2"]').hide(),o.find('option[value="3"]').hide(),o.find('option[value="4"]').hide(),l&&(o.val("5"),this.setFilterType(5,e));break;case"number":o.find('option[value="1"]').hide();break;default:o.find("option").show()}}static clearFilters(e){const t=this.filterContainer.find(".card").not("#no-filter-card");let n=e.activeFilters;if(e.filteringOnColumn)return n=n.filter((t=>t.column.columnIndex===e.filterColumnIndex)),n.forEach((e=>{this.filterContainer.find(`.card[data-bd-index="${e.index}"]`).remove()})),e.activeFilters=e.activeFilters.filter((t=>t.column.columnIndex!==e.filterColumnIndex)),this.showHideNoFiltersMessage(e),this.showHideDeleteFilterButton(e),void this.applyFilterIndication(e);t.remove(),e.activeFilters=[],this.showHideNoFiltersMessage(e),this.showHideDeleteFilterButton(e),this.applyFilterIndication(e)}static showHideDeleteFilterButton(e){const t=$("#clear-filters");let n=e.activeFilters;e.filteringOnColumn&&(n=n.filter((t=>t.column.columnIndex===e.filterColumnIndex))),n.length>1?t.removeClass("d-none"):t.addClass("d-none")}static fillDataList(e,t,n){const l=e.find(".text-field .data-list"),i=e.find(".equal-input"),o=t.tableHandler.tableBody.map((e=>e[n]?e[n].text.toLowerCase():null)),a=Math.floor(1e6*Math.random()),s=[...new Set(o)];l.empty(),i.empty(),s.forEach((e=>{const t=$("<option></option>");t.val(e),t.text(e),l.append(t),i.append(t.clone())})),l.attr("id",`data-list-${a}`),e.find(".text-input").attr("list",`data-list-${a}`)}static applyFilterIndication(e){const t=e.activeFilters,n=[...new Set(t.map((e=>e.column.columnIndex)).filter((e=>null!==e)))],l=e.tableHandler.table;l.find("thead th .has-filter").remove(),l.find("thead th .table-header").removeClass("position-relative"),n.forEach((e=>{const t=$('<span class="has-filter position-absolute" style="top: -5px; right: -5px">\n                                <i class="bi bi-funnel-fill" style="font-size: 10px"></i>\n                            </span>');l.find(`thead th[data-column-index="${e}"] .table-header`).addClass("position-relative"),l.find(`thead th[data-column-index="${e}"] .table-header`).append(t)}))}}f.filterContainer=$("#filter-container");class b{static addOpenModalEventHandler(e,t=null){let n=$(`#filter-table-${e.tableId}`);e.hasCustomFilter&&(n=t),0!==n.length&&(n.on("click",(()=>{e.hasCustomFilter&&e.tableHandler.table.parent().hasClass("d-none")||(e.filteringOnColumn=!1,e.filterColumnIndex=null,f.openModal(e))})),e.tableHandler.table.find("div.table-header-text").on("click",(t=>{const n=$(t.target).closest("th").data("column-index");(n||0===n)&&(e.filteringOnColumn=!0,e.filterColumnIndex=n,f.openModal(e,n))})))}static addOnEnterEventHandler(e){e.filterModal.find("#add-filter-card input").off("keydown").on("keydown",(e=>{"Enter"===e.key&&$(e.target).closest(".card").find("#add-filter").trigger("click")}))}static addAddNewFilterEventHandler(e){$("#add-filter").on("click",(t=>{e.addNewFilter(t)}))}static addChangeFilterTypeEventHandler(e,t=null){t?t.find(".filter-type").on("change",(n=>{const l=+$(n.target).val(),i=+t.attr("data-bd-index"),o=e.activeFilters.find((e=>e.index===i));!o||1!==l&&2!==l&&3!==l&&4!==l||(o.filter=l),f.setFilterType(l,t),e.filter()})):$(".filter-type").on("change",(e=>{const t=+$(e.target).val(),n=$(e.target).closest(".card");f.setFilterType(t,n)}))}static addCloseModalEventHandler(e){e.filterModal.on("hidden.bs.modal",(()=>{e.filterModal.attr("data-active-table",""),e.filterModal.off("hidden.bs.modal"),f.filterContainer.find(".card").not("#no-filter-card").remove(),e.filteringOnColumn&&f.resetClickedColumn(e),$("#add-filter").off("click"),$("#clear-filters").off("click"),$("#filter-column").off("change"),$(".filter-type").off("change")}))}static addCardEventListeners(e,t){this.addRemoveFilterEventHandler(e,t),this.addChangeFilterTypeEventHandler(t,e),this.addOnInputEventHandler(e,t)}static addRemoveFilterEventHandler(e,t){e.find(".remove-filter").on("click",(e=>{t.deleteFilter(e)}))}static addOnInputEventHandler(e,t){e.on("input change","input, select",(n=>{const l=n.target,i=Number(e.attr("data-bd-index")),o=t.activeFilters.find((e=>e.index===i));if(!o)return;const a=l.value;l.classList.contains("min-input")?o.rangeFilter.min=+a:l.classList.contains("max-input")?o.rangeFilter.max=+a:l.classList.contains("text-input")?o.textFilter=a:l.classList.contains("more-input")?o.moreThan=+a:l.classList.contains("less-input")?o.lessThan=+a:l.classList.contains("equal-input")&&(o.equalTo=$(l).val()),t.filter()}))}static addChangeFilterColumnEventHandler(e){$("#filter-column").on("change",(t=>{const n=$(t.target).closest(".card"),l=+$(t.target).val();f.updateFilterType(n,e,l),f.fillDataList(n,e,l),e.filter()}))}static addClearFiltersEventHandler(e){$("#clear-filters").on("click",(()=>{e.clearFilters()}))}}class m{static createFilter(e,t,n,l,i,o,a,s,r){const d=r.indexCounter++;switch(t){case 1:return new h(d,e,t,n);case 2:return new h(d,e,t,null,null,null,{min:l,max:i});case 3:return new h(d,e,t,null,o);case 4:return new h(d,e,t,null,null,a);case 5:return new h(d,e,t,null,null,null,{min:null,max:null},s);default:return null}}static validateColumn(e,t){return t.tableHandler.fullHeaderNames.find((t=>t.columnIndex===e))}static parseNumber(e){if(!e||""===e.trim())return null;const t=Number(e);return isNaN(t)?null:t}static getFilterInputs(e){return{columnValue:+e.find("#filter-column").val(),filterValue:+e.find(".filter-type").val(),textFilter:e.find(".text-input").val()||null,minRange:this.parseNumber(e.find(".min-input").val()),maxRange:this.parseNumber(e.find(".max-input").val()),moreThan:this.parseNumber(e.find(".more-input").val()),lessThan:this.parseNumber(e.find(".less-input").val()),equal:e.find(".equal-input").val()}}}class v{constructor(e,t=null,n=null){if(this.filterModal=$("#filterModal"),this.activeFilters=[],this.shownRows=0,this.indexCounter=0,this.hasCustomFilter=!1,this.customFilterId=null,this.filteringOnColumn=!1,this.filterColumnIndex=null,this.filter=()=>{this.shownRows=0;const e=this,t=this.activeFilters;this.tableHandler.table.find("tbody tr").each((function(){const n=$(this);let l=!0;t.forEach((e=>{var t,i,o;const a=e.filter,s=e.rangeFilter,r=null===(t=e.textFilter)||void 0===t?void 0:t.toLowerCase(),c=e.lessThan,u=e.moreThan,h=null!==(o=null===(i=null==e?void 0:e.equalTo)||void 0===i?void 0:i.map((e=>e.toLowerCase())))&&void 0!==o?o:null,p=n.find(`td:eq(${e.column.columnIndex})`).text().toLowerCase();switch(a){case d.TEXT:r&&!p.includes(r)&&r.length>0&&(l=!1);break;case d.RANGE_FILTER:null!==s.min&&null!==s.max&&(+p<s.min||+p>s.max)&&(l=!1);break;case d.MORE_THAN:+p<u&&null!==u&&(l=!1);break;case d.LESS_THAN:+p>c&&null!==c&&(l=!1);break;case d.EQUAL_TO:h&&h.length>0&&""!==h[0]&&!h.includes(p.toLowerCase())&&(l=!1)}})),l?(e.shownRows++,n.show()):n.hide()})),f.showTableRowCount(this),f.showTableFilterCount(this)},0===this.filterModal.length)throw new Error("Filter modal not found");this.tableHandler=e,this.tableId=e.tableId.replace("table_",""),this.hasCustomFilter=t&&t.length>0,this.customFilterId=n,b.addOpenModalEventHandler(this,t),f.showTableRowCount(this)}addNewFilter(e){const t=$(e.target).closest(".card"),n=m.getFilterInputs(t),{columnValue:l,filterValue:i,textFilter:o,minRange:a,maxRange:s,moreThan:r,lessThan:d,equal:c}=n;f.resetErrorState(t.find("#filter-column"),t.find(".filter-type"));const u=m.validateColumn(l,this),h=!!u;h||f.markInvalid(t.find("#filter-column"));const p=m.createFilter(u,i,o,a,s,r,d,c,this),b=!!p;return b||f.markInvalid(t.find(".filter-type")),!(!h||!b||(this.activeFilters.push(p),f.appendFilterHTML(this,p),f.applyFilterIndication(this),this.filter(),0))}deleteFilter(e){const t=$(e.target).closest(".card"),n=this.activeFilters.findIndex((e=>e.index===+t.attr("data-bd-index")));this.activeFilters.splice(n,1),t.remove(),f.showHideNoFiltersMessage(this),f.showHideDeleteFilterButton(this),f.applyFilterIndication(this),this.filter()}clearFilters(){f.clearFilters(this),this.filter()}applyFilter(e,t,n=null,l=null,i=null,o=null,a=null){if([n,l,i,o,a].every((e=>null===e)))throw new Error("No filter criteria provided");const s=new h(this.indexCounter++,e,t,n,i,o,l,a);return this.activeFilters.push(s),f.applyFilterIndication(this),this.filter(),s}removeFilter(e){const t=this.activeFilters.findIndex((t=>t.index===e));-1!==t&&(this.activeFilters.splice(t,1),f.showHideNoFiltersMessage(this),f.showHideDeleteFilterButton(this),f.applyFilterIndication(this),this.filter())}}class g{constructor(t,n,l=!1){this.tableDownload=null,this.fullHeaderNames=[],this.tableHeaders=[],this.tableBody=[],this.collapsed=!1,this.table=t,this.tableId=n,this.setTableId(),this.setTableName(),this.readTable(),this.tableSorter=new e(this.table,this.tableId),l||(this.tableFilter=new v(this),this.tableDownload=new u(this),this.addExpandCollapse()),this.handleRotedHeaders()}setTableId(){this.table.attr("id",this.tableId)}readTable(){this.readTableHeader(),this.readTableBody()}readTableHeader(){const e=this.table.find("thead"),n=this.table.find("tbody");let l=0;e.find("tr").each(((e,i)=>{const o=[];let a=0;$(i).find("th").each(((e,i)=>{const s=$(i).attr("colspan"),r=$(i).text().trim();if(s){const e=Array.from({length:parseInt(s,10)},(()=>a++));for(let i=0;i<parseInt(s,10);i++){const d=a-parseInt(s,10)+i,c=n.find("tr:eq(0)").find(`td:eq(${d})`).text().trim().replace(",","."),u=Number(c),h=isNaN(u)?"text":"number",p=this.updateFullHeaderNames(d,r,h);i>0?o.push(new t("",0,e,l++,p)):o.push(new t(r,parseInt(s,10),e,l++,p))}}else o.push(new t(r,1,[a++],l++,this.updateFullHeaderNames(a-1,r)))})),this.tableHeaders.push(o)}))}readTableBody(){this.tableBody=[],this.table.find("tbody").find("tr").each(((e,t)=>{const l="none"!==$(t).css("display"),i=[];$(t).find("td").each(((e,t)=>{var o,a,s;const r=null===(s=null===(a=null===(o=$(t).attr("style"))||void 0===o?void 0:o.split("background-color:")[1])||void 0===a?void 0:a.split(";")[0])||void 0===s?void 0:s.trim(),d=$(t).find(".table-body-text p"),c=d.length>0?d.text().trim():$(t).text().trim(),u=$(t).find("a").attr("href")||null;r&&"None"!==r?i.push(new n(c,g.getHexColor(r),g.getRgbColor(r),l,u)):i.push(new n(c,null,null,l,u))})),this.tableBody.push(i)}))}updateFullHeaderNames(e,t,n="text"){const l=this.fullHeaderNames.find((t=>t.columnIndex===e));return l?(l.text+=` ${t}`,l.text=l.text.trim(),l.text):(this.fullHeaderNames.push({columnIndex:e,text:t,columnType:n}),t)}static getHexColor(e){if(/^#[0-9A-F]{6}$/iu.test(e))return e.split("#")[1];const t=$("<div></div>").css("color",e).appendTo("body"),n=t.css("color");t.remove();const l=n.match(/\d+/gu);return l?`${((1<<24)+(parseInt(l[0],10)<<16)+(parseInt(l[1],10)<<8)+parseInt(l[2],10)).toString(16).slice(1)}`:null}static getRgbColor(e){const t=$("<div></div>").css("color",e).appendTo("body"),n=t.css("color");t.remove();const l=n.match(/\d+/gu);return!l||l.length<3?null:[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]}setTableName(){this.tableName=this.table.attr("data-bd-table-name")||"Table"}addExpandCollapse(){const e=$(`#expand-collaps-button-${this.tableId.replace("table_","")}`),t=this.table.parent();t.hasClass("collapse")&&(this.collapsed=!0,e.html('<i class="bi bi-caret-down-fill"></i>')),e.on("click",(()=>{switch(this.collapsed){case!0:this.collapsed=!1,e.html('<i class="bi bi-caret-up-fill"></i>'),t.removeClass("collapse");break;case!1:this.collapsed=!0,e.html('<i class="bi bi-caret-down-fill"></i>'),t.addClass("collapse")}e.tooltip("hide")}))}handleRotedHeaders(){const e=this.table.hasClass("angled-headers-45"),t=this.table.hasClass("angled-headers-90"),n=this.table.closest(".table-wrapper"),l=n.hasClass("d-none");if(l&&n.removeClass("d-none").css({visibility:"hidden",display:"block"}),e&&this.table.find("th").each(((e,t)=>{const n=$(t),l=1.5*n.find("div.table-header-text").outerHeight();n.find("span.table-header-text").css("margin-left",`${l}px`)})),t){let e=0;this.table.find("th").each(((t,n)=>{const l=$(n),i=l.find("div.table-header-text"),o=l.find(".table-header"),a=i.outerHeight(),s=i.outerWidth();o.css("width",`${s+20}px`),l.find("span.table-header-text").css("padding-left",`${a}px`),s>e&&(e=s)})),this.table.find("th").each(((t,n)=>{$(n).find(".header-wrapper").css("height",`${e}px`)}))}l&&n.addClass("d-none").css({visibility:"",display:""})}}class w{constructor(){this.tableContainers=$(".table-container"),this.addScrollingHeaderListener()}addScrollingHeaderListener(){this.tableContainers.each(((e,t)=>{const n=$(t),l=n.find("table").find("thead");w.applyEventListener(l,n)}))}static applyEventListener(e,t){let n=!1;function l(){n||(window.requestAnimationFrame((()=>{w.scroll(e,t),n=!1})),n=!0)}$(window).on("scroll",l),$(t).on("scroll",l),$(".flex-grow-1.overflow-x-hidden").on("scroll",l)}static scroll(e,t){const n=t.offset().top,l=t.height(),i=e.height(),o=t.scrollTop(),a=window.scrollY,s=n+l<a+i,r=n<a,d=o>0;if(!r&&!d&&!s)return void e.css("transform","none");let c=0;r&&!s?c=a-n+o:d&&!s?c=o:s&&(c=l-i+parseInt(e.css("border-bottom-width")||"0",10)),c=Math.round(c),e.css("transform",`translateY(${c}px)`)}}var y=function(e,t,n,l){return new(n||(n=Promise))((function(i,o){function a(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}r((l=l.apply(e,t||[])).next())}))};class x extends u{constructor(e=null,t=null){super(t.activeTable.tableHandler,!0),this.downloadAsGroup=!0,this.downloadOnlyVisible=!1,this.tableGroupHandler=t,this.downloadButton=e,r.addGroupDownloadModalEventListeners(this)}downloadExcel(){const e=Object.create(null,{downloadExcel:{get:()=>super.downloadExcel}});return y(this,void 0,void 0,(function*(){if(this.downloadOnlyVisible)yield e.downloadExcel.call(this,this.tableGroupHandler.activeTable.tableHandler);else if(this.downloadAsGroup){let e="";const t=yield i.createWorkbook();let n=1;for(const l of this.tableGroupHandler.tables){if(!l.tableHandler)continue;l.tableHandler.readTableBody();let o=l.tableHandler.tableName||"Table";t.getWorksheet(o)&&(o=`${o} (${n})`,n++);const a=t.addWorksheet(o),s=l.tableHandler.tableHeaders,r=l.tableHandler.tableBody;i.addHeaderRow(a,s,this.useStyling,l.tableHandler.fullHeaderNames),i.addBodyRows(a,r,s.length,this.useFilter,this.useStyling,this.showValidations),i.autoSizeColumns(a),e+=`${l.tableHandler.tableName}_`}e=e.slice(0,-1),yield i.executeDownload(t,e),o.closeModal()}else for(const t of this.tableGroupHandler.tables)yield e.downloadExcel.call(this,t.tableHandler)}))}downloadPdf(){const e=Object.create(null,{downloadPdf:{get:()=>super.downloadPdf}});return y(this,void 0,void 0,(function*(){if(this.downloadOnlyVisible)yield e.downloadPdf.call(this,this.tableGroupHandler.activeTable.tableHandler);else if(this.downloadAsGroup){let e="",t=!0;const n=yield i.createPdfInstance(this.pdfPageSize);for(const l of this.tableGroupHandler.tables){if(!l.tableHandler)continue;l.tableHandler.readTableBody(),e+=`${l.tableHandler.tableName}_`;const o=20;t||n.addPage();const a=l.tableHandler.tableHeaders,s=l.tableHandler.tableBody,r=i.getHeadStyle(this),d=i.getBodyStyle(this),c=i.extractHeaderData(a,this),u=i.extractBodyData(s,this);i.createPdf(n,c,u,r,d,o),t=!1}e=e.slice(0,-1),n.save(`${i.parseFileName(e)}.pdf`),o.closeModal()}else for(const t of this.tableGroupHandler.tables)yield e.downloadPdf.call(this,t.tableHandler)}))}downloadCsv(){return y(this,void 0,void 0,(function*(){if(0===this.tableGroupHandler.tables.length)return;if(this.downloadOnlyVisible){if(!this.tableGroupHandler.activeTable.tableHandler)return;const e=i.convertTableToCsv(this.tableGroupHandler.activeTable.tableHandler,this.showValidations);return i.downloadCsvFile(e,this.tableGroupHandler.activeTable.tableHandler.tableName),void o.closeModal()}const e=[];for(const t of this.tableGroupHandler.tables)t&&t.tableHandler&&(t.tableHandler.readTableBody(),e.push(i.convertTableToCsv(t.tableHandler,this.showValidations)));yield i.downloadMultipleCsvFiles(e,this.tableGroupHandler.tables.map((e=>{var t,n;return null!==(n=null===(t=e.tableHandler)||void 0===t?void 0:t.tableName)&&void 0!==n?n:"Table"}))),o.closeModal()}))}}class C{constructor(e){this.tables=[],this.collapsed=!1,this.nonVisibleButtons=[],this.htmlTables=$(`table[data-dd-table-group="${e}"], .alert[data-dd-table-group="${e}"]`),this.id=e,this.buttonGroupId=`button-group-${e}`,this.removeOutOfBoundButtons(),this.htmlTables.each(((e,t)=>{const n=($(t).attr("id")||`table-${e}`).replace("-","_");if($(t).hasClass("alert"))return void this.tables.push({tableHandler:null,tableFilter:null,isEmpty:!0,item:$(t),tableId:n});const l=new g($(t),n,!0),i=new v(l,$(`#filter-table-group-${this.id}`),this.id);this.tables.push({tableHandler:l,tableFilter:i,isEmpty:!1,item:$(t),tableId:n})})),this.activeTable=this.tables[0],new x($(`#download-group-${this.id}`),this),$(`#${this.buttonGroupId}`).on("click",(e=>{const t=$(e.target).attr("data-dd-table-id");if(!t)return;const n=`table_${t}`;this.activeTable=this.tables.find((e=>e.tableId===n)),this.activeTable&&this.toggleTable(n)})),this.startCollapse(),$(window).on("resize",(()=>{$(`#${this.buttonGroupId}`).is(":visible")&&this.removeOutOfBoundButtons()}))}toggleTable(e){const t=this.tables.find((t=>t.tableId===e));if(!t)return;this.tables.forEach((e=>{e.item.parent().addClass("d-none")}));const n=this.activeTable.tableFilter;n&&(f.showTableRowCount(n),f.showTableFilterCount(n)),t.item.parent().removeClass("d-none")}startCollapse(){const e=$(`#expand-collaps-group-button-${this.id}`),t=$(`#table-group-${this.id}`);t.hasClass("collapse")&&(this.collapsed=!0,e.html('<i class="bi bi-caret-down-fill"></i>')),e.on("click",(()=>{switch(this.collapsed){case!0:this.collapsed=!1,e.html('<i class="bi bi-caret-up-fill"></i>'),t.removeClass("collapse");break;case!1:this.collapsed=!0,e.html('<i class="bi bi-caret-down-fill"></i>'),t.addClass("collapse")}e.tooltip("hide")}))}getTableHandlers(){return this.tables.map((e=>e.tableHandler))}resetButtonGroup(){this.nonVisibleButtons.forEach((e=>{e.css("display","inline-block")})),$(`#${this.buttonGroupId} .dropdown-toggle`).remove(),$(`#${this.buttonGroupId} .dropdown-menu`).remove(),this.nonVisibleButtons=[]}calculateGroupBounds(){const e=$(`#${this.buttonGroupId}`),t=parseFloat(e.css("padding-left"))||0,n=parseFloat(e.css("padding-right"))||0;return{left:e.offset().left+t,right:e.offset().left+e.innerWidth()-n-50}}filterButtonsWithinBounds(e){const t=$(`#${this.buttonGroupId}`);let n=null;return t.find("label").each(((t,l)=>{const i=$(l),o=i.offset().left,a=o+i.outerWidth(!0);i.removeClass("rounded-end"),a>e.right||o<e.left?(i.css("display","none"),this.nonVisibleButtons.push(i)):(i.css("display","inline-block"),n=i)})),n}renderDropdown(){const e=$(`<button class="btn btn-sm btn-secondary dropdown-toggle" type="button" id="dropdownGroupMenuButton-${this.id}" data-bs-toggle="dropdown" aria-expanded="false">Meer</button>`),t=$(`<ul class="dropdown-menu" aria-labelledby="dropdownGroupMenuButton-${this.id}" id="dropdownGroupMenu-${this.id}"></ul>`);this.nonVisibleButtons.forEach((e=>{const n=e.attr("for"),l=$(`#${n}`).is(":checked"),i=$(`<li><a class="dropdown-item ${l?"active":""}" href="#" data-dd-table-id="${e.attr("data-dd-table-id")}">${e.text()}</a></li>`);i.on("click",(n=>{n.preventDefault(),e.trigger("click",[n]),t.removeClass("show"),t.find("a").removeClass("active"),i.find("a").addClass("active")})),t.append(i)})),$(`#${this.buttonGroupId}`).append(e).append(t)}removeOutOfBoundButtons(){if(this.resetButtonGroup(),0===$(`#${this.buttonGroupId}`).length)return;const e=this.calculateGroupBounds(),t=this.filterButtonsWithinBounds(e);if(1===this.nonVisibleButtons.length&&t)return this.nonVisibleButtons[0].css("display","inline-block"),void(this.nonVisibleButtons=[]);this.nonVisibleButtons.length>0&&this.renderDropdown()}}var F=a(4213),E=function(e,t,n,l){return new(n||(n=Promise))((function(i,o){function a(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}r((l=l.apply(e,t||[])).next())}))};class k{constructor(e=[]){this.enabled=!1,this.oneFile=!0,this.useFilter=!0,this.useStyling=!0,this.showValidations=!0,this.tables=e}exportAllTables(){return E(this,arguments,void 0,(function*(e="excel"){const t=yield i.createZip(),n=this.oneFile&&"excel"===e,l=n?yield i.createWorkbook():null,a=yield i.createPdfInstance("a4");let s=!0;for(const n of this.tables)s||"pdf"!==e||a.addPage(),yield this.exportSingleTable(n,e,t,a,l),s=!1;if(n&&l&&"excel"===e)i.executeDownload(l,"all_tables");else if(this.oneFile&&"pdf"===e)a.save("all_tables.pdf");else{const e=yield t.generateAsync({type:"blob"}),n="all_tables.zip";(0,F.saveAs)(e,n)}o.closeModal()}))}exportSingleTable(e,t,n,l,o){return E(this,void 0,void 0,(function*(){var a;const s=null!==(a=e.tableDownload)&&void 0!==a?a:new u(e,!0),r={useStyling:s.useStyling,showValidations:s.showValidations,useFilter:s.useFilter};if(this.applySettings(s),o&&"excel"===t)s.prepareDownloadExcel(e,o);else if("pdf"===t)i.generatePdfFile(s,l);else if("csv"===t){const l=i.convertTableToCsv(e,this.useFilter),o=k.generateFileName(e,n,t);n.file(o,l)}else{const l=yield k.generateBufferForFormat(s,e,t),i=k.generateFileName(e,n,t);n.file(i,l)}k.resetSettings(s,r)}))}applySettings(e){e.useStyling=this.useStyling,e.showValidations=this.showValidations,e.useFilter=this.useFilter}static resetSettings(e,t){e.useStyling=t.useStyling,e.showValidations=t.showValidations,e.useFilter=t.useFilter}static generateBufferForFormat(e,t,n){return E(this,void 0,void 0,(function*(){if("excel"===n){const n=yield i.createWorkbook();return e.prepareDownloadExcel(t,n),yield n.xlsx.writeBuffer()}if("pdf"===n){const t=yield i.generatePdfFile(e),n=yield t.output("blob");return yield n.arrayBuffer()}throw new Error(`Unsupported export format: ${n}`)}))}static generateFileName(e,t,n){const l="excel"===n?"xlsx":"pdf"===n?"pdf":"csv";let i=`${e.tableName}.${l}`;return t.file(i)&&(i=`${e.tableName} (${e.tableId}).${l}`),i}}class H{constructor(e){this.activeComponent=null,this.componentControls=null,this.nonVisibleButtons=[],this.buttonGroup=null,this.groupId=e,this.init()}init(){this.components=$(`.component-group[data-dd-group="${this.groupId}"] [data-dd-group][data-dd-group-index]`).toArray().map((e=>$(e))),this.activeComponent=this.components[0],this.componentControls=$(`.component-group[data-dd-group="${this.groupId}"] > .component-header > .component-controls`),this.buttonGroup=this.componentControls.find(".btn-group"),this.buttonGroup&&this.buttonGroup.length>0&&this.removeOutOfBoundButtons(),this.identifyControls(),this.bindEvents()}identifyControls(){if(!this.componentControls||0===this.componentControls.length)return;let e=Math.random().toString(36).slice(2,15);this.componentControls.find('input[type="radio"], label').each(((t,n)=>{const l=$(n);l.is('input[type="radio"]')?(e=Math.random().toString(36).slice(2,15),l.attr("id",`dd-group-${this.groupId}-${e}`),l.attr("name",`dd-btn-group-${this.groupId}`)):l.is("label")&&l.attr("for",`dd-group-${this.groupId}-${e}`)}))}bindEvents(){this.componentControls&&0!==this.componentControls.length&&(this.componentControls.on("change",(e=>{const t=$(e.target);if(t.is('input[type="radio"]')){const e=parseInt(t.data("dd-group-index"),10);!isNaN(e)&&e>=0&&e<this.components.length&&this.selectComponent(e)}})),$(window).on("resize",(()=>{this.buttonGroup&&this.buttonGroup.is(":visible")&&this.removeOutOfBoundButtons()})))}selectComponent(e){this.activeComponent&&this.activeComponent.addClass("d-none"),this.activeComponent=this.components[e],this.activeComponent.removeClass("d-none"),window.dispatchEvent(new Event("resize"))}resetButtonGroup(){this.buttonGroup&&(this.nonVisibleButtons.forEach((e=>{e.css("display","inline-block")})),this.buttonGroup.find(".dropdown-toggle").remove(),this.buttonGroup.find(".dropdown-menu").remove(),this.nonVisibleButtons=[])}calculateGroupBounds(){const e=this.buttonGroup,t=parseFloat(e.css("padding-left"))||0,n=parseFloat(e.css("padding-right"))||0;return{left:e.offset().left+t,right:e.offset().left+e.innerWidth()-n-70}}filterButtonsWithinBounds(e){const t=this.buttonGroup;let n=null;return t.find("label").each(((t,l)=>{const i=$(l),o=i.offset().left,a=o+i.outerWidth(!0);i.removeClass("rounded-end"),a>e.right||o<e.left?(i.css("display","none"),this.nonVisibleButtons.push(i)):(i.css("display","inline-block"),n=i)})),n}renderDropdown(){const e=$(`<button class="btn btn-sm btn-secondary dropdown-toggle" type="button" id="dropdownGroupMenuButton-${this.groupId}" data-bs-toggle="dropdown" aria-expanded="false">Meer</button>`),t=$(`<ul class="dropdown-menu" aria-labelledby="dropdownGroupMenuButton-${this.groupId}" id="dropdownGroupMenu-${this.groupId}"></ul>`);this.nonVisibleButtons.forEach((e=>{const n=e.attr("for"),l=$(`#${n}`).is(":checked"),i=$(`<li><a class="dropdown-item ${l?"active":""}" href="#" data-dd-group-index="${e.data("dd-group-index")}">${e.text()}</a></li>`);i.on("click",(n=>{n.preventDefault(),e.trigger("click",[n]),t.removeClass("show"),t.find("a").removeClass("active"),i.find("a").addClass("active")})),t.append(i)})),this.buttonGroup.append(e).append(t)}removeOutOfBoundButtons(){if(this.resetButtonGroup(),!this.buttonGroup)return;const e=this.calculateGroupBounds(),t=this.filterButtonsWithinBounds(e);if(1===this.nonVisibleButtons.length&&t)return this.nonVisibleButtons[0].css("display","inline-block"),void(this.nonVisibleButtons=[]);this.nonVisibleButtons.length>0&&this.renderDropdown()}}class S{constructor(e){this.collapsed=!0,this.element=e,this.collapsed=e.data("dd-collapsed"),this.applyEventListeners(),this.collapsed||this.toggleSidebar()}applyEventListeners(){this.applyEventSidebarExpandCollapse(),this.applyEventSidebarOnClick()}applyEventSidebarExpandCollapse(){this.element.find(".sidebar-toggle").on("click",(()=>{this.toggleSidebar()}))}toggleSidebar(){this.element.toggleClass("collapsed"),this.collapsed=this.element.hasClass("collapsed"),this.element.data("dd-collapsed",this.collapsed.toString()),this.changeSidebarState(),$('.nav-group [data-bs-toggle="tooltip"]').each(((e,t)=>{this.element.hasClass("collapsed")?S.showTooltip(t):S.hideTooltip(t)})),window.dispatchEvent(new Event("resize"))}applyEventSidebarOnClick(){this.element.find(".sidebar").on("click",(e=>{const t=$(e.target).closest(".nav-group");if(t.hasClass("sidebar-show-all"))S.handleShowAllClick(t);else if(t.length>0){const e=t.data("dd-target");if($(".component-wrapper").addClass("d-none"),e){const t=$(`#${e}`);t.length>0&&(t.removeClass("d-none"),$(window).trigger("resize"))}$(".nav-group").removeClass("active"),t.addClass("active")}}))}changeSidebarState(){const e=this.element.find(".sidebar-toggle i");this.element.hasClass("collapsed")?e.removeClass("bi-chevron-double-left").addClass("bi-chevron-double-right"):e.removeClass("bi-chevron-double-right").addClass("bi-chevron-double-left")}static handleShowAllClick(e){$(".component-wrapper").removeClass("d-none"),$(".nav-group").removeClass("active"),e.addClass("active")}static hideTooltip(e){const t=bootstrap.Tooltip.getInstance(e);t&&(t.disable(),t.hide())}static showTooltip(e){let t=bootstrap.Tooltip.getInstance(e);t||(t=new bootstrap.Tooltip(e,{trigger:"hover",container:"body"})),t.enable()}}const T=[];let I=[];$("table, .alert").each(((e,t)=>{const n=$(t).attr("data-dd-table-group");let l=$(t).attr("id");if(!n&&t.classList.contains("alert")||!l)return;const i=+l.replace("table-","");if(l=`table_${i}`,n&&!T.some((e=>e.id===n))){const e=new C(n);T.push(e),I=I.concat(e.getTableHandlers())}else T.some((e=>e.id===n))||I.push(new g($(t),l))})),$(".component-group").each(((e,t)=>{const n=$(t).attr("data-dd-group");n&&new H(n)})),new w,$(".hover").on("mouseenter",(function(){$(".hover-element").length>0&&$(".hover-element").remove();const e=300,t=$(this),n=t.find(".details"),l=t.offset();let i=20,o=20;const a=$('<div class="hover-element"></div>');a.append(n.clone()),a.css({zIndex:1e3,display:"none",position:"absolute",witespace:"wrap",overflow:"hidden",maxWidth:"300px",padding:"1rem",fontSize:"1rem"}),$("body").append(a),l.left+a.width()>t.closest(".table-container").width()-40&&(i=-a.width()-i-10),l.top+a.height()>$(window).height()-60&&(o=-a.height()-o-10),a.css({left:l.left+i,top:l.top+o}),$("body").append(a),a.fadeIn(e),t.on("mouseleave",(()=>{a.fadeOut(e,(function(){$(this).remove()}))})),a.on("mouseenter",(()=>{a.stop(),a.fadeIn(e),a.on("mouseleave",(()=>{a.fadeOut(e,(function(){$(this).remove()}))}))}))}));const B=new k(I);document.addEventListener("DOMContentLoaded",(()=>{window.dispatchEvent(new Event("resize")),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((e=>new bootstrap.Tooltip(e,{trigger:"hover",container:"body"})))}));const L=$(".sidebar-wrapper");L.length>0&&new S(L),document.querySelectorAll("select[multiple]").forEach((e=>{new p(e)}))})()})();