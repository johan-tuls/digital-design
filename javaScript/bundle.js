(()=>{"use strict";const t=t=>{const e=$(`#filter_container_${t}`).find(".card");$(`#table_${t} tbody tr`).each((function(){const t=$(this);let i=!0;e.each((function(){const e=$(this),n=e.attr("id"),s=e.find("select").val(),l=e.find("input[type=number]").eq(0).val(),a=e.find("input[type=number]").eq(1).val(),o=e.find("input[type=text]").val(),r=n.split(".")[2],c=t.find("td").eq(r-1).text().toLowerCase();if("numeric"===s)""!==l&&""!==a&&l<a&&(console.log(c,l,a,c),(c<l||c>a)&&(i=!1));else{if("text"!==s)return;c.includes(o)||(i=!1)}})),i?t.show():t.hide()}))},e=(e,n,s)=>{const l=document.getElementById(e),a=l.querySelector(".card-body .filter-numeric"),o=l.querySelector(".card-body .filter-text");"numeric"===s?(console.log("numeric"),a.style.display="flex",o.style.display="none",i(e,"numeric"),t(n)):"text"===s?(a.style.display="none",o.style.display="block",i(e,"text"),t(n)):(a.style.display="none",o.style.display="none",i(e,"none"),console.log(n),t(n))},i=(t,e)=>{const i=n(t)||{};i.sortType=e,sessionStorage.setItem(t,JSON.stringify(i))},n=t=>JSON.parse(sessionStorage.getItem(t))||{};$("table").each((function(t){const e=$(this),i="table_"+t,n=e.find("tr");e.attr("id",i),n.each((function(t){let i=0;$(this).find("th").each((function(t){const n=$(this),s=n.text();if(n.attr("colspan")>1){n.css("cursor","default");const t=parseInt(n.attr("colspan"));i+=t}else n.wrapInner('<span title="Click om de kolom '+s+' te sorteren"></span>'),i++,n.attr("data-column-index",i);n.click((function(){const t=new Set,i=$(this).data("column-index"),n="ascending"===$(this).data("sort")?"descending":"ascending",s=e.children("tbody").children("tr").get();$(this).data("sort",n),s.forEach((function(e){const n=$(e).children("td").eq(i-1).text();t.add(n)})),1!==t.size&&(s.sort((function(t,e){const n=$(t).children("td").eq(i-1).text(),s=$(e).children("td").eq(i-1).text(),l=parseFloat(n),a=parseFloat(s);return isNaN(l)||isNaN(a)?n.localeCompare(s):l-a})),"descending"===n&&s.reverse(),$.each(s,(function(t,i){e.children("tbody").append(i)})))}))}))}))})),$("[id^=tableFilter_]").on("input",(function(){const t=$(this).val().toLowerCase(),e=$(this).attr("id").split("_")[1];$(`#table_${e} tbody tr`).each((function(){const e=$(this);e.find("td").each((function(){let i=$(this).text().toLowerCase(),n=$(this).find(".details").text().toLowerCase();if($(this).hasClass("has-details")&&(i=i.replace(n,"")),i.includes(t))return e.show(),!1;e.hide()}))}))})),$("[id^=clearFilter_]").on("click",(function(){const t=$(this).attr("id").split("_")[1];$(`#tableFilter_${t}`).val(""),$(`#table_${t} tbody tr`).show()})),$(".has-details").each((function(){const t=$(this).find(".details");t.offset().left+t.width()>$(window).width()-20&&t.addClass("popup-details-left"),t.offset().top+t.height()>$(window).height()-20&&t.addClass("popup-details-top")})),$(".filter-options").each((function(t){$(this).find(".filter-container").attr("id","filter_container_"+t)})),$("table").each((function(t){const e=$(this),i=t,n=$(`#filter_container_${t}`),s=e.find("thead tr"),l=s.length;let a=0;switch(l){case 1:case 2:a=0;break;default:a=1}s.each((function(t){if(t!==a)return;const e=t;$(this).find("th").each((function(t){const s="filter_"+i+"."+e+"."+$(this).attr("data-column-index"),l="text_"+i+"."+e+"."+$(this).attr("data-column-index"),a="Numeric_"+i+"."+e+"."+$(this).attr("data-column-index"),o=$(this).text(),r=$(this).attr("colspan"),c=`\n                    <div class="card" id="${s}">\n                        <div class="card-top">\n                            <h3 class="card-title">${o}</h3>\n                   \n                            <select name="sort-type" class="sort_type">\n                                <option value="none">Geen filter</option>\n                                <option value="text">Filter op text</option>\n                                <option value="numeric">Filter tussen 2 getallen</option>\n                            </select>\n                        </div>\n                        <div class="card-body">\n                            <div class="filter-numeric" style="display: none;">\n                                <div>\n                                    <label>Min:</label>\n                                    <input type="number" id="min_${a}" step="0.1">\n                                </div>\n                                <div>\n                                    <label>Max:</label>\n                                    <input type="number" id="max_${a}" step="0.1">\n                                </div>\n                            </div>\n                            <div class="filter-text" style="display: none;">\n                                <label>Text:</label>\n                                <input type="text" id="${l}">\n                            </div>\n                        </div>\n                    </div>\n                `;""==o||r>1||n.append(c)}))}))})),$(".sort_type").on("change",(function(){const t=$(this).closest(".card").attr("id"),i=(t.split("_").length>1?t.split("_")[1]:t.split("_")[0]).split(".")[0],n=$(this).val();e(t,i,n)})),$(".show-filter-options").on("click",(function(){const t=$(this),e=$(this).closest(".filter-options").find(".filter-container");"0px"!==e.css("max-height")?(t.text("Laat specifieke filters zien"),t.toggleClass("active"),e.css("max-height","0px"),e.css("overflowY","hidden")):(t.toggleClass("active"),t.text("Verberg specifieke filters"),e.css("overflowY","scroll"),e.css("max-height","400px"))})),$(".filter-options").each((function(i){$(this).find(".filter-container").find(".card").each((function(i){if(null===sessionStorage.getItem($(this).attr("id"))){const t=$(this),e=t.attr("id"),i=t.find("select").val(),n=t.find("input[type=number]").eq(0).val(),s=t.find("input[type=number]").eq(1).val();((t,e,i,n,s)=>{sessionStorage.setItem(t,JSON.stringify({sortType:e,text:i,minValue:n,maxValue:s}))})(e,i,t.find("input[type=text]").val(),n,s)}else{const i=$(this),s=i.attr("id"),l=n(s),a=l.sortType,o=l.minValue,r=l.maxValue,c=l.text;i.find("select").val(a),i.find("input[type=number]").eq(0).val(o),i.find("input[type=number]").eq(1).val(r),i.find("input[type=text]").val(c),e(s,s.split("_")[2],a),t(s.split("_")[1].split(".")[0])}}))})),$(".filter-container").find("input").on("input",(function(){let e=0;if($(this).attr("id").startsWith("min")){let t=$(this).attr("id").split("_")[2];t="filter_"+t,((t,e)=>{const i=n(t)||{};i.minValue=e,sessionStorage.setItem(t,JSON.stringify(i))})(t,$(this).val()),e=$(this).attr("id").split("_")[2].split(".")[0]}if($(this).attr("id").startsWith("max")){let t=$(this).attr("id").split("_")[2];t="filter_"+t,((t,e)=>{const i=n(t)||{};i.maxValue=e,sessionStorage.setItem(t,JSON.stringify(i))})(t,$(this).val()),e=$(this).attr("id").split("_")[2].split(".")[0]}if($(this).attr("id").startsWith("text")){let t=$(this).attr("id").split("_")[1];t="filter_"+t,((t,e)=>{const i=n(t)||{};i.text=e,sessionStorage.setItem(t,JSON.stringify(i))})(t,$(this).val()),e=$(this).attr("id").split("_")[1].split(".")[0]}t(e)})),$(".clear-specific-filters").on("click",(function(){const t=$(this).closest(".filter-options").find(".filter-container"),i=$(this).closest(".filter-options").find(".filter-container").attr("id").split("_")[2];t.find(".card").each((function(){const t=$(this),n=t.attr("id");t.find("select").val("none"),e(n,i,"none"),((t,e,i,n,s)=>{sessionStorage.setItem(t,JSON.stringify({minValue:"",maxValue:"",text:"",sortType:"none"}))})(n)})),$(`#table_${i} tbody tr`).show()}))})();